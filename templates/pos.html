<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Slow Tea Bar POS</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; }
    .grid { display: grid; grid-template-columns: 2fr 1fr; gap: 20px; }
    .btn { display: inline-block; padding: 14px 16px; margin: 6px; border: 1px solid #ccc; border-radius: 10px; background: #f6f6f6; cursor: pointer; }
    .btn:hover { background: #eee; }
    .card { border: 1px solid #ddd; border-radius: 12px; padding: 14px; }
    table { width: 100%; border-collapse: collapse; }
    td { padding: 8px; border-bottom: 1px solid #eee; }
    .rowbtn { padding: 6px 10px; border-radius: 8px; border: 1px solid #ccc; background: #fff; cursor: pointer; }
  </style>
</head>
<body>
  <h2>Slow Tea Bar — POS</h2>

  <p>
    First run? Open <code>/init</code> once to create DB + sample menu.
  </p>

  <div class="grid">
    <div class="card">
      <h3>Menu</h3>
      {% for b in beverages %}
      <form method="post" action="/cart/add/{{b.id}}" style="display:inline">
        <button class="btn" type="submit">{{b.name}}<br>Rp {{"{:,}".format(b.price)}}</button>
      </form>
      {% endfor %}
    </div>

    <div class="card">
      <h3>Cart</h3>
      {% if items %}
      <table>
        {% for it in items %}
        <tr>
          <td>
            <b>{{it.name}}</b><br>
            Rp {{"{:,}".format(it.price)}} × {{it.qty}} = Rp {{"{:,}".format(it.line_total)}}
          </td>
          <td style="text-align:right">
            <form method="post" action="/cart/inc/{{it.id}}" style="display:inline">
              <button class="rowbtn" type="submit">+</button>
            </form>
            <form method="post" action="/cart/dec/{{it.id}}" style="display:inline">
              <button class="rowbtn" type="submit">−</button>
            </form>
          </td>
        </tr>
        {% endfor %}
      </table>

      <h3>Total: Rp {{"{:,}".format(total)}}</h3>

      <form method="post" action="/checkout">
        <label>Payment:</label>
        <select name="payment_method">
          <option value="cash">Cash</option>
          <option value="qris">QRIS</option>
          <option value="transfer">Transfer</option>
        </select>
        <button class="btn" type="submit">Checkout</button>
      </form>
      {% else %}
      <p>Empty cart.</p>
      {% endif %}
    </div>
  </div>
</body>
</html>
